<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WGfinder K√∂ln ‚Äî Dein WG-Zimmer in K√∂ln</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --primary: #6C5CE7;
            --primary-light: #A29BFE;
            --primary-dark: #5A4BD1;
            --accent: #00CEC9;
            --accent-light: #81ECEC;
            --bg: #F8F9FE;
            --card-bg: #FFFFFF;
            --text: #2D3436;
            --text-light: #636E72;
            --text-muted: #B2BEC3;
            --border: #E8ECF4;
            --shadow: 0 2px 16px rgba(108, 92, 231, 0.08);
            --shadow-hover: 0 8px 30px rgba(108, 92, 231, 0.15);
            --radius: 16px;
            --radius-sm: 10px;
            --radius-xs: 6px;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }

        /* ===== HEADER ===== */
        header {
            background: linear-gradient(135deg, var(--primary) 0%, #8B7CF7 50%, var(--accent) 100%);
            padding: 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(108, 92, 231, 0.3);
        }

        .header-top {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: rgba(255,255,255,0.2);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            backdrop-filter: blur(10px);
        }

        .logo h1 {
            color: white;
            font-size: 22px;
            font-weight: 800;
            letter-spacing: -0.5px;
        }

        .logo h1 span {
            font-weight: 500;
            opacity: 0.85;
        }

        .header-badge {
            background: rgba(255,255,255,0.2);
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .header-badge .pulse {
            width: 8px;
            height: 8px;
            background: #00FF88;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.3); }
        }

        .hero-text {
            text-align: center;
            padding: 8px 20px 20px;
            color: rgba(255,255,255,0.9);
            font-size: 14px;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* ===== SEARCH BAR ===== */
        .search-section {
            max-width: 1200px;
            margin: -20px auto 0;
            padding: 0 16px;
            position: relative;
            z-index: 50;
        }

        .search-card {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: var(--shadow-hover);
            border: 1px solid var(--border);
        }

        .search-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }

        @media (min-width: 768px) {
            .search-grid {
                grid-template-columns: 1fr 1fr 1fr 1fr auto;
                align-items: end;
            }
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .form-group label {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-light);
        }

        .form-group select,
        .form-group input {
            padding: 10px 14px;
            border: 2px solid var(--border);
            border-radius: var(--radius-sm);
            font-size: 14px;
            font-family: inherit;
            color: var(--text);
            background: var(--bg);
            transition: all 0.2s;
            outline: none;
        }

        .form-group select:focus,
        .form-group input:focus {
            border-color: var(--primary-light);
            background: white;
            box-shadow: 0 0 0 4px rgba(108, 92, 231, 0.1);
        }

        .price-range {
            display: flex;
            gap: 8px;
        }

        .price-range input {
            width: 100%;
        }

        .btn-search {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 28px;
            border-radius: var(--radius-sm);
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
            white-space: nowrap;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-search:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(108, 92, 231, 0.3);
        }

        /* ===== RESULTS ===== */
        .results-section {
            max-width: 1200px;
            margin: 24px auto;
            padding: 0 16px;
        }

        .results-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
            flex-wrap: wrap;
            gap: 8px;
        }

        .results-count {
            font-size: 15px;
            color: var(--text-light);
        }

        .results-count strong {
            color: var(--text);
            font-weight: 700;
        }

        .sort-btn {
            background: var(--card-bg);
            border: 1px solid var(--border);
            padding: 8px 16px;
            border-radius: var(--radius-xs);
            font-size: 13px;
            cursor: pointer;
            color: var(--text-light);
            font-family: inherit;
            transition: all 0.2s;
        }

        .sort-btn:hover {
            border-color: var(--primary-light);
            color: var(--primary);
        }

        .results-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 16px;
        }

        @media (min-width: 768px) {
            .results-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (min-width: 1024px) {
            .results-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* ===== LISTING CARD ===== */
        .listing-card {
            background: var(--card-bg);
            border-radius: var(--radius);
            overflow: hidden;
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
        }

        .listing-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-hover);
            border-color: var(--primary-light);
        }

        .card-image {
            height: 160px;
            position: relative;
            overflow: hidden;
        }

        .card-image-bg {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            position: relative;
        }

        .card-image-bg::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: linear-gradient(transparent, rgba(0,0,0,0.3));
        }

        .source-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.3px;
            z-index: 2;
            backdrop-filter: blur(10px);
        }

        .source-wg-gesucht {
            background: rgba(255, 107, 107, 0.9);
            color: white;
        }

        .source-immoscout {
            background: rgba(232, 119, 34, 0.9);
            color: white;
        }

        .source-kleinanzeigen {
            background: rgba(72, 187, 120, 0.9);
            color: white;
        }

        .new-badge {
            position: absolute;
            top: 12px;
            left: 12px;
            background: var(--accent);
            color: white;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            z-index: 2;
        }

        .card-price-overlay {
            position: absolute;
            bottom: 12px;
            left: 12px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 6px 14px;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 800;
            z-index: 2;
            backdrop-filter: blur(10px);
        }

        .card-price-overlay small {
            font-size: 12px;
            font-weight: 500;
            opacity: 0.85;
        }

        .card-body {
            padding: 16px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .card-location {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-bottom: 6px;
        }

        .card-location .street {
            font-weight: 600;
            font-size: 15px;
            color: var(--text);
        }

        .card-location .district {
            font-size: 12px;
            color: var(--primary);
            font-weight: 600;
            background: rgba(108, 92, 231, 0.08);
            padding: 2px 8px;
            border-radius: 4px;
        }

        .card-meta {
            display: flex;
            gap: 12px;
            margin: 8px 0 10px;
            flex-wrap: wrap;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 13px;
            color: var(--text-light);
        }

        .meta-item .icon {
            font-size: 14px;
        }

        .card-desc {
            font-size: 13px;
            color: var(--text-light);
            line-height: 1.5;
            flex: 1;
            margin-bottom: 12px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .card-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
            padding-top: 12px;
            border-top: 1px solid var(--border);
        }

        .card-date {
            font-size: 12px;
            color: var(--text-muted);
        }

        .btn-contact {
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: var(--radius-xs);
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
        }

        .btn-contact:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
        }

        /* ===== NO RESULTS ===== */
        .no-results {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-light);
            grid-column: 1 / -1;
        }

        .no-results .emoji {
            font-size: 48px;
            margin-bottom: 12px;
        }

        .no-results h3 {
            font-size: 18px;
            margin-bottom: 8px;
            color: var(--text);
        }

        /* ===== FOOTER ===== */
        footer {
            background: var(--text);
            color: rgba(255,255,255,0.7);
            text-align: center;
            padding: 32px 20px;
            margin-top: 48px;
        }

        .footer-main {
            font-size: 16px;
            margin-bottom: 8px;
            color: white;
            font-weight: 600;
        }

        .footer-sources {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin: 12px 0;
            flex-wrap: wrap;
        }

        .footer-source {
            font-size: 12px;
            padding: 4px 12px;
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.15);
            color: rgba(255,255,255,0.6);
        }

        .footer-disclaimer {
            font-size: 11px;
            opacity: 0.5;
            margin-top: 12px;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }

        /* ===== CONTACT MODAL ===== */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
            backdrop-filter: blur(4px);
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: white;
            border-radius: var(--radius);
            padding: 32px;
            max-width: 420px;
            width: 100%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: modalIn 0.3s ease;
        }

        @keyframes modalIn {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .modal h3 {
            font-size: 20px;
            margin-bottom: 8px;
        }

        .modal p {
            color: var(--text-light);
            font-size: 14px;
            margin-bottom: 20px;
        }

        .modal .btn-close {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 32px;
            border-radius: var(--radius-sm);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            font-family: inherit;
        }

        /* ===== ANIMATIONS ===== */
        .listing-card {
            animation: fadeInUp 0.4s ease both;
        }

        @keyframes fadeInUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Stagger */
        .listing-card:nth-child(1) { animation-delay: 0.05s; }
        .listing-card:nth-child(2) { animation-delay: 0.1s; }
        .listing-card:nth-child(3) { animation-delay: 0.15s; }
        .listing-card:nth-child(4) { animation-delay: 0.2s; }
        .listing-card:nth-child(5) { animation-delay: 0.25s; }
        .listing-card:nth-child(6) { animation-delay: 0.3s; }
        .listing-card:nth-child(7) { animation-delay: 0.35s; }
        .listing-card:nth-child(8) { animation-delay: 0.4s; }
        .listing-card:nth-child(9) { animation-delay: 0.45s; }
        .listing-card:nth-child(10) { animation-delay: 0.5s; }

        /* Mobile tweaks */
        @media (max-width: 480px) {
            .header-top { padding: 12px 16px; }
            .logo h1 { font-size: 18px; }
            .logo-icon { width: 34px; height: 34px; font-size: 18px; }
            .search-card { padding: 16px; }
            .card-image { height: 140px; }
        }
    </style>
</head>
<body>

<!-- HEADER -->
<header>
    <div class="header-top">
        <div class="logo">
            <div class="logo-icon">üè†</div>
            <h1>WGfinder <span>K√∂ln</span></h1>
        </div>
        <div class="header-badge">
            <div class="pulse"></div>
            Live aktualisiert
        </div>
    </div>
    <div class="hero-text">
        Alle WG-Zimmer in K√∂ln ‚Äî von WG-Gesucht, ImmoScout & Kleinanzeigen an einem Ort.
    </div>
</header>

<!-- SEARCH -->
<div class="search-section">
    <div class="search-card">
        <div class="search-grid">
            <div class="form-group">
                <label>Stadtteil</label>
                <select id="filter-district">
                    <option value="">Alle Stadtteile</option>
                    <option>Ehrenfeld</option>
                    <option>Belgisches Viertel</option>
                    <option>S√ºdstadt</option>
                    <option>Nippes</option>
                    <option>S√ºlz</option>
                    <option>Lindenthal</option>
                    <option>Deutz</option>
                    <option>M√ºlheim</option>
                </select>
            </div>
            <div class="form-group">
                <label>Preis (Warmmiete)</label>
                <div class="price-range">
                    <input type="number" id="filter-price-min" placeholder="Min ‚Ç¨" min="0" step="50">
                    <input type="number" id="filter-price-max" placeholder="Max ‚Ç¨" min="0" step="50">
                </div>
            </div>
            <div class="form-group">
                <label>Zimmergr√∂√üe</label>
                <select id="filter-size">
                    <option value="">Egal</option>
                    <option value="small">Bis 15 qm</option>
                    <option value="medium">15‚Äì20 qm</option>
                    <option value="large">√úber 20 qm</option>
                </select>
            </div>
            <div class="form-group">
                <label>Verf√ºgbar ab</label>
                <input type="date" id="filter-date">
            </div>
            <div class="form-group">
                <button class="btn-search" onclick="filterListings()">
                    üîç Suchen
                </button>
            </div>
        </div>
    </div>
</div>

<!-- RESULTS -->
<div class="results-section">
    <div class="results-header">
        <div class="results-count"><strong id="count">10</strong> WG-Zimmer gefunden</div>
        <button class="sort-btn" onclick="sortByPrice()">‚Üï Nach Preis sortieren</button>
    </div>
    <div class="results-grid" id="results-grid">
        <!-- Cards injected by JS -->
    </div>
</div>

<!-- CONTACT MODAL -->
<div class="modal-overlay" id="modal" onclick="closeModal(event)">
    <div class="modal">
        <div style="font-size: 48px; margin-bottom: 12px;">üì¨</div>
        <h3>Das ist ein Mockup!</h3>
        <p>Dieses Portal ist ein Demo-Prototyp. In der Vollversion k√∂nntest du hier direkt die WG kontaktieren ‚Äî √ºber WG-Gesucht, ImmoScout oder Kleinanzeigen.</p>
        <button class="btn-close" onclick="document.getElementById('modal').classList.remove('active')">Verstanden üëç</button>
    </div>
</div>

<!-- FOOTER -->
<footer>
    <div class="footer-main">Powered by OpenClaw ü¶û ‚Äî Automatisch aktualisiert</div>
    <div class="footer-sources">
        <span class="footer-source">WG-Gesucht</span>
        <span class="footer-source">ImmoScout24</span>
        <span class="footer-source">Kleinanzeigen</span>
    </div>
    <div class="footer-disclaimer">
        Daten werden automatisch von WG-Gesucht, ImmoScout24 und Kleinanzeigen aggregiert. 
        Alle Angaben ohne Gew√§hr. Dies ist ein Mockup/Prototyp.
    </div>
</footer>

<script>
const listings = [
    {
        street: "Venloer Str. 241",
        district: "Ehrenfeld",
        price: 420,
        size: 16,
        date: "2025-08-01",
        source: "WG-Gesucht",
        desc: "Helles Zimmer in entspannter 3er-WG, direkt an der Venloer. Altbau mit hohen Decken, gemeinsame K√ºche mit Balkon. Waschmaschine vorhanden. Bahnhof Ehrenfeld 3 Min. üöÉ",
        color: "#FF6B6B",
        emoji: "üé®",
        isNew: true
    },
    {
        street: "Br√ºsseler Str. 58",
        district: "Belgisches Viertel",
        price: 580,
        size: 20,
        date: "2025-07-15",
        source: "ImmoScout",
        desc: "Stylisches Zimmer in Belgischem Viertel! Altbau-WG mit 4 Leuten (Studis + Berufst√§tige). Caf√©s und Bars vor der T√ºr. Parkett, 3.50m Decken.",
        color: "#E87722",
        emoji: "‚òï",
        isNew: true
    },
    {
        street: "Alteburger Str. 34",
        district: "S√ºdstadt",
        price: 490,
        size: 18,
        date: "2025-09-01",
        source: "Kleinanzeigen",
        desc: "Gem√ºtliches Zimmer in ruhiger 2er-WG. S√ºdstadt-Lage, Chlodwigplatz um die Ecke. Eigener Kellerabteil. Gesucht wird jemand zwischen 20-30 üéì",
        color: "#48BB78",
        emoji: "üå≥",
        isNew: false
    },
    {
        street: "Neusser Str. 177",
        district: "Nippes",
        price: 385,
        size: 14,
        date: "2025-08-15",
        source: "WG-Gesucht",
        desc: "Kleines aber feines Zimmer in bunter 4er-WG. Wir kochen zusammen (Mi ist WG-Abend!). Nippes Markt direkt nebenan, super zum Einkaufen. üç≥",
        color: "#FF6B6B",
        emoji: "üçï",
        isNew: false
    },
    {
        street: "Z√ºlpicher Str. 88",
        district: "S√ºlz",
        price: 450,
        size: 17,
        date: "2025-07-01",
        source: "ImmoScout",
        desc: "WG-Zimmer in Top-Lage f√ºr Studis! 5 Min zur Uni K√∂ln. 3er-WG, alle Studierend. Innenhof mit Garten. Keller und Waschk√ºche inkl. Perfekt f√ºr Erstis!",
        color: "#E87722",
        emoji: "üìö",
        isNew: true
    },
    {
        street: "D√ºrener Str. 205",
        district: "Lindenthal",
        price: 520,
        size: 22,
        date: "2025-08-01",
        source: "WG-Gesucht",
        desc: "Gro√ües Zimmer mit eigenem Balkon! Ruhige 3er-WG in gr√ºner Lage. Stadtwald um die Ecke, Uni 10 Min mit dem Rad. M√∂bliert optional m√∂glich. üåø",
        color: "#FF6B6B",
        emoji: "üåø",
        isNew: false
    },
    {
        street: "Deutzer Freiheit 112",
        district: "Deutz",
        price: 370,
        size: 13,
        date: "2025-09-15",
        source: "Kleinanzeigen",
        desc: "G√ºnstiges Zimmer in 5er-WG direkt an der Deutzer Freiheit. K√∂lner Dom in 5 Min. Einkaufsm√∂glichkeiten top, KVB direkt vor der T√ºr. üöá",
        color: "#48BB78",
        emoji: "üåâ",
        isNew: false
    },
    {
        street: "Frankfurter Str. 45",
        district: "M√ºlheim",
        price: 350,
        size: 15,
        date: "2025-08-01",
        source: "WG-Gesucht",
        desc: "Kreatives Viertel, faire Miete! 3er-WG in M√ºlheim, das Viertel boomt. Viele Ateliers und Caf√©s in der N√§he. Altbau, Gemeinschaftsbalkon. üé≠",
        color: "#FF6B6B",
        emoji: "üé≠",
        isNew: true
    },
    {
        street: "Stammheimer Str. 63",
        district: "Nippes",
        price: 410,
        size: 16,
        date: "2025-10-01",
        source: "ImmoScout",
        desc: "Nachmieter gesucht f√ºr tolles Zimmer! Ruhige Seitenstra√üe in Nippes, trotzdem alles in der N√§he. WG besteht seit 3 Jahren, sehr harmonisch üíõ",
        color: "#E87722",
        emoji: "üè°",
        isNew: false
    },
    {
        street: "Aachener Str. 312",
        district: "S√ºlz",
        price: 475,
        size: 19,
        date: "2025-07-15",
        source: "Kleinanzeigen",
        desc: "Ger√§umiges Zimmer mit Erker! 2er-WG in saniertem Altbau. Aachener Weiher 5 Min, Uni-Mensa 8 Min. Nachtschw√§rmer willkommen, Z√ºlpicher ist nah üåô",
        color: "#48BB78",
        emoji: "üåô",
        isNew: false
    }
];

let currentListings = [...listings];
let sortAsc = true;

function getSourceClass(source) {
    if (source === "WG-Gesucht") return "source-wg-gesucht";
    if (source === "ImmoScout") return "source-immoscout";
    return "source-kleinanzeigen";
}

function getGradient(listing) {
    const gradients = {
        "Ehrenfeld": "linear-gradient(135deg, #667eea 0%, #764ba2 100%)",
        "Belgisches Viertel": "linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",
        "S√ºdstadt": "linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",
        "Nippes": "linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)",
        "S√ºlz": "linear-gradient(135deg, #fa709a 0%, #fee140 100%)",
        "Lindenthal": "linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%)",
        "Deutz": "linear-gradient(135deg, #fccb90 0%, #d57eeb 100%)",
        "M√ºlheim": "linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)"
    };
    return gradients[listing.district] || "linear-gradient(135deg, #667eea 0%, #764ba2 100%)";
}

function formatDate(dateStr) {
    const d = new Date(dateStr);
    return d.toLocaleDateString('de-DE', { day: '2-digit', month: 'short', year: 'numeric' });
}

function renderListings(data) {
    const grid = document.getElementById('results-grid');
    document.getElementById('count').textContent = data.length;
    
    if (data.length === 0) {
        grid.innerHTML = `
            <div class="no-results">
                <div class="emoji">üîç</div>
                <h3>Keine Ergebnisse</h3>
                <p>Versuch's mit anderen Filtern ‚Äî in K√∂ln findet sich immer was!</p>
            </div>
        `;
        return;
    }
    
    grid.innerHTML = data.map((l, i) => `
        <div class="listing-card" style="animation-delay: ${i * 0.05}s">
            <div class="card-image">
                <div class="card-image-bg" style="background: ${getGradient(l)}">
                    <span style="font-size: 56px; z-index: 1;">${l.emoji}</span>
                </div>
                ${l.isNew ? '<span class="new-badge">Neu</span>' : ''}
                <span class="source-badge ${getSourceClass(l.source)}">${l.source}</span>
                <div class="card-price-overlay">${l.price}‚Ç¨ <small>/Monat</small></div>
            </div>
            <div class="card-body">
                <div class="card-location">
                    <span class="street">${l.street}</span>
                </div>
                <div style="margin-bottom: 6px;">
                    <span class="district">${l.district}</span>
                </div>
                <div class="card-meta">
                    <span class="meta-item"><span class="icon">üìê</span> ${l.size} qm</span>
                    <span class="meta-item"><span class="icon">üìÖ</span> ab ${formatDate(l.date)}</span>
                    <span class="meta-item"><span class="icon">üî•</span> Warmmiete</span>
                </div>
                <div class="card-desc">${l.desc}</div>
                <div class="card-footer">
                    <span class="card-date">via ${l.source}</span>
                    <button class="btn-contact" onclick="openModal()">Kontakt ‚Üí</button>
                </div>
            </div>
        </div>
    `).join('');
}

function filterListings() {
    const district = document.getElementById('filter-district').value;
    const priceMin = parseInt(document.getElementById('filter-price-min').value) || 0;
    const priceMax = parseInt(document.getElementById('filter-price-max').value) || 9999;
    const sizeFilter = document.getElementById('filter-size').value;
    const dateFilter = document.getElementById('filter-date').value;

    currentListings = listings.filter(l => {
        if (district && l.district !== district) return false;
        if (l.price < priceMin || l.price > priceMax) return false;
        if (sizeFilter === 'small' && l.size > 15) return false;
        if (sizeFilter === 'medium' && (l.size < 15 || l.size > 20)) return false;
        if (sizeFilter === 'large' && l.size <= 20) return false;
        if (dateFilter && l.date > dateFilter) return false;
        return true;
    });

    renderListings(currentListings);
}

function sortByPrice() {
    sortAsc = !sortAsc;
    currentListings.sort((a, b) => sortAsc ? a.price - b.price : b.price - a.price);
    renderListings(currentListings);
}

function openModal() {
    document.getElementById('modal').classList.add('active');
}

function closeModal(e) {
    if (e.target === e.currentTarget) {
        document.getElementById('modal').classList.remove('active');
    }
}

// Initial render
renderListings(currentListings);
</script>

</body>
</html>
